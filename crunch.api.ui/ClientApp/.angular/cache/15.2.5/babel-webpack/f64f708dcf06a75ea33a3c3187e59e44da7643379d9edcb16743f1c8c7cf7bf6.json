{"ast":null,"code":"import { CrunchedSuccessfullyComponent } from '../shared/dialogs/crunched-successfully/crunched-successfully.component';\nimport { CrunchedUnSuccessfulComponent } from '../shared/dialogs/crunched-un-successful/crunched-un-successful.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../shared/services/crunch/crunch.service\";\nimport * as i2 from \"ngx-spinner\";\nimport * as i3 from \"ngx-bootstrap/modal\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction HomeComponent_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 11);\n    i0.ɵɵtext(1, \"Please Choose a .text file\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HomeComponent_button_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function HomeComponent_button_12_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.sendToCruncher(ctx_r2.crunchService));\n    });\n    i0.ɵɵtext(1, \"Crunch\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class HomeComponent {\n  constructor(crunchService, spinner, modaleService) {\n    this.crunchService = crunchService;\n    this.spinner = spinner;\n    this.modaleService = modaleService;\n    this.isNotTextFile = false;\n  }\n  ngOnInit() {}\n  onFileChange($event) {\n    var fileList = $event?.target.files;\n    if (fileList.length > 0) {\n      this.crunchFile = fileList[0];\n    }\n  }\n  appendFileContent(file) {\n    const uploadFormData = new FormData();\n    var ext = /^.+\\.([^.]+)$/.exec(file.name);\n    var fileExtension = null ? \"\" : ext[1];\n    if (fileExtension.toLowerCase() === 'txt') {\n      this.isNotTextFile = false;\n      uploadFormData.append('documentFileName', file.name);\n      uploadFormData.append('documentFile', file);\n      uploadFormData.append('documentDescription', 'Pre-Cruch File');\n    } else {\n      this.isNotTextFile = true;\n    }\n    return uploadFormData;\n  }\n  sendToCruncher(crunchService) {\n    this.spinner.show();\n    var crunchFileAndContents = this.appendFileContent(this.crunchFile);\n    var crunchSubscription = crunchService.CrunchWord(crunchFileAndContents).subscribe({\n      next: response => {\n        this.spinner.hide();\n        if (response.isSuccess) {\n          var modalConfig = {\n            class: 'modal-md modal-dialog-centered',\n            backdrop: 'static',\n            initialState: {\n              crunchedString: response.data\n            }\n          };\n          this.modaleService.show(CrunchedSuccessfullyComponent, modalConfig);\n        } else {\n          var modalConfig = {\n            class: 'modal-md modal-dialog-centered',\n            backdrop: 'static',\n            initialState: {\n              unsuccessfullMessage: response.message\n            }\n          };\n          this.modaleService.show(CrunchedUnSuccessfulComponent, modalConfig);\n        }\n      },\n      error: error => {\n        this.spinner.hide();\n      }\n    });\n    return crunchSubscription;\n  }\n}\nHomeComponent.ɵfac = function HomeComponent_Factory(t) {\n  return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.CrunchService), i0.ɵɵdirectiveInject(i2.NgxSpinnerService), i0.ɵɵdirectiveInject(i3.BsModalService));\n};\nHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HomeComponent,\n  selectors: [[\"app-home\"]],\n  decls: 13,\n  vars: 2,\n  consts: [[\"type\", \"ball-scale-multiple\"], [1, \"crunch-body\"], [1, \"cruncher-banner\"], [1, \"logo-container\"], [\"src\", \"../../assets/images/Alexforbes-new-logo.png\", \"alt\", \"alex-logo\"], [1, \"form-wrapper\"], [1, \"row\"], [\"style\", \"color: #124E57;\", 4, \"ngIf\"], [\"type\", \"file\", \"accept\", \"\", 3, \"change\"], [1, \"mt-5\"], [\"class\", \"crunch-btn\", 3, \"click\", 4, \"ngIf\"], [2, \"color\", \"#124E57\"], [1, \"crunch-btn\", 3, \"click\"]],\n  template: function HomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"ngx-spinner\", 0);\n      i0.ɵɵelementStart(1, \"div\")(2, \"div\", 1)(3, \"div\", 2)(4, \"div\", 3);\n      i0.ɵɵelement(5, \"img\", 4);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(6, \"div\", 5)(7, \"form\")(8, \"div\", 6);\n      i0.ɵɵtemplate(9, HomeComponent_span_9_Template, 2, 0, \"span\", 7);\n      i0.ɵɵelementStart(10, \"input\", 8);\n      i0.ɵɵlistener(\"change\", function HomeComponent_Template_input_change_10_listener($event) {\n        return ctx.onFileChange($event);\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(11, \"div\", 9);\n      i0.ɵɵtemplate(12, HomeComponent_button_12_Template, 2, 0, \"button\", 10);\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngIf\", ctx.isTextFile);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.crunchFile);\n    }\n  },\n  dependencies: [i4.NgIf, i5.ɵNgNoValidate, i5.NgControlStatusGroup, i5.NgForm, i2.NgxSpinnerComponent],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["CrunchedSuccessfullyComponent","CrunchedUnSuccessfulComponent","i0","HomeComponent","constructor","crunchService","spinner","modaleService","ngOnInit","onFileChange","$event","fileList","target","files","length","crunchFile","appendFileContent","file","uploadFormData","FormData","ext","exec","name","fileExtension","toLowerCase","isNotTextFile","append","sendToCruncher","show","crunchFileAndContents","crunchSubscription","CrunchWord","subscribe","next","response","hide","isSuccess","modalConfig","class","backdrop","initialState","crunchedString","data","unsuccessfullMessage","message","error","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\bongi\\source\\repos\\Angular-Projects\\alexforbes.crunch.assess\\crunch.api.ui\\ClientApp\\src\\app\\home\\home.component.ts","C:\\Users\\bongi\\source\\repos\\Angular-Projects\\alexforbes.crunch.assess\\crunch.api.ui\\ClientApp\\src\\app\\home\\home.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { CrunchService } from '../shared/services/crunch/crunch.service';\r\nimport { ApiResponse } from '../shared/models/http-response.model';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { BsModalService, ModalOptions } from 'ngx-bootstrap/modal'\r\nimport { CrunchedSuccessfullyComponent } from '../shared/dialogs/crunched-successfully/crunched-successfully.component';\r\nimport { CrunchedUnSuccessfulComponent } from '../shared/dialogs/crunched-un-successful/crunched-un-successful.component';\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.component.html',\r\n})\r\nexport class HomeComponent implements OnInit {\r\n\r\n  public crunchFile: File;\r\n\r\n  public isNotTextFile: boolean = false;\r\n\r\n  public constructor(\r\n    public crunchService: CrunchService,\r\n    private spinner: NgxSpinnerService,\r\n    private modaleService: BsModalService\r\n  ){}\r\n\r\n  ngOnInit(): void {\r\n\r\n\r\n  }\r\n\r\n  onFileChange($event: any){\r\n\r\n    var fileList = $event?.target.files;\r\n\r\n    if(fileList.length > 0){\r\n\r\n      this.crunchFile = fileList[0];\r\n\r\n    }\r\n\r\n  }\r\n\r\n  private appendFileContent(file: File): FormData{\r\n    \r\n    const uploadFormData = new FormData();\r\n\r\n    var ext: any = /^.+\\.([^.]+)$/.exec(file.name);\r\n    var fileExtension: string = null ? \"\" : ext[1];\r\n\r\n    if(fileExtension.toLowerCase() === 'txt'){\r\n\r\n      this.isNotTextFile = false;\r\n\r\n      uploadFormData.append('documentFileName', file.name);\r\n      uploadFormData.append('documentFile', file);\r\n      uploadFormData.append('documentDescription', 'Pre-Cruch File');\r\n\r\n      \r\n\r\n    }else{\r\n\r\n      this.isNotTextFile = true;\r\n\r\n    }\r\n\r\n    return uploadFormData;\r\n\r\n    \r\n\r\n  }\r\n\r\n  public sendToCruncher(crunchService: CrunchService): Subscription{\r\n\r\n    this.spinner.show();\r\n\r\n    var crunchFileAndContents = this.appendFileContent(this.crunchFile);\r\n\r\n    var crunchSubscription = crunchService.CrunchWord(crunchFileAndContents).subscribe({\r\n\r\n      next: (response: ApiResponse) => {\r\n\r\n        this.spinner.hide();\r\n\r\n        if(response.isSuccess){\r\n\r\n          var modalConfig: ModalOptions ={\r\n            class: 'modal-md modal-dialog-centered',\r\n            backdrop: 'static',\r\n            initialState: {crunchedString: response.data}\r\n          };\r\n\r\n          this.modaleService.show(CrunchedSuccessfullyComponent, modalConfig);\r\n\r\n        }else{\r\n\r\n          var modalConfig: ModalOptions ={\r\n            class: 'modal-md modal-dialog-centered',\r\n            backdrop: 'static',\r\n            initialState: {unsuccessfullMessage: response.message}\r\n          };\r\n\r\n          this.modaleService.show(CrunchedUnSuccessfulComponent, modalConfig);\r\n\r\n        }\r\n\r\n      },\r\n      error: (error) => {\r\n\r\n        this.spinner.hide();\r\n\r\n      }\r\n\r\n    });\r\n\r\n    return crunchSubscription;\r\n\r\n  }\r\n\r\n\r\n}\r\n","<ngx-spinner type=\"ball-scale-multiple\"></ngx-spinner>\r\n\r\n<div>\r\n\r\n  <div class=\"crunch-body\">\r\n\r\n    <div class=\"cruncher-banner\">\r\n\r\n      <div class=\"logo-container\">\r\n\r\n        <img src=\"../../assets/images/Alexforbes-new-logo.png\" alt=\"alex-logo\">\r\n\r\n      </div>\r\n   \r\n\r\n    </div>\r\n\r\n    <div class=\"form-wrapper\">\r\n\r\n      <form>\r\n  \r\n        <div class=\"row\">\r\n          <span *ngIf=\"isTextFile\" style=\"color: #124E57;\">Please Choose a .text file</span>\r\n          <input type=\"file\" accept=\"\" (change)=\"onFileChange($event)\">\r\n        </div>\r\n    \r\n        <div class=\"mt-5\" >\r\n          <button (click)=\"sendToCruncher(crunchService)\" *ngIf=\"crunchFile\" class=\"crunch-btn\" >Crunch</button>\r\n        </div>\r\n      \r\n      </form>\r\n  \r\n    </div>\r\n\r\n  </div>\r\n\r\n</div>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}